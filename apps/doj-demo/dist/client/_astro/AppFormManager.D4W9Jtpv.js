import{j as e,i as fe,k as re,l as H,m as be,n as je,r as ve,o as G,g as V,P as Ne,p as $,q as ye,t as we,w as Se,x as Fe,y as _e,z as Pe,A as ke,B as Ee,C as Ce,D as J,E as Ie,F as De,f as g,G as P,H as X,h as $e,I as Q,c as D,J as y,K as Re,L as K,M as Ue,N as Le,O as Ae,S as Oe,Q as Te,R as qe,T as Be,U as Me,V as Ve,W as ze}from"./hoisted.BEYJ10uI.js";import{a as p,g as We,b as ae}from"./index.DFIQk4pD.js";import{L as He,c as ie,e as ne,F as oe,f as Ge,H as Je,R as Xe,a as v,u as E,h as Qe,i as Ke,j as Ze,k as Ye,C as et,l as le,m as tt,T as st,P as rt,n as at,o as it,S as nt,g as z,d as ot}from"./context.DCw82Bp5.js";const B={path:"/",getUrl:()=>"#"},M={path:"/create-form",getUrl:()=>"#/create-form"},lt={path:"/:formId/inspect",getUrl:t=>`#/${t}/inspect`},C={path:"/:formId/preview",getUrl:t=>`#/${t}/preview`},O={path:"/:formId/create",getUrl:t=>`#/${t}/create`},T={path:"/:formId/configure",getUrl:t=>`#/${t}/configure`},Z={path:"/:formId/publish",getUrl:t=>`#/${t}/publish`},ct={path:"/:formId/delete",getUrl:t=>`#/${t}/delete`};function dt({formService:t,urlForForm:s,urlForFormManager:r}){const[a,i]=p.useState([]);return p.useEffect(()=>{const n=t.getFormList();n.success&&i(n.data)},[]),e.jsxs(e.Fragment,{children:[e.jsx("section",{className:"padding-y-3 desktop:margin-top-10 border-base-lighter border-y",children:e.jsx("div",{className:"grid-container",children:e.jsx("div",{className:"grid-row flex-justify-center",children:e.jsx("div",{className:"grid-col-12 tablet:grid-col-12 desktop:grid-col-12",children:e.jsxs("div",{className:"bg-white padding-y-2 padding-x-3 border border-base-lighter",children:[e.jsx("h1",{children:"My Forms"}),e.jsx(ut,{forms:a,urlForForm:s,urlForFormManager:r})]})})})})}),e.jsxs("div",{className:"grid-container usa-section",children:[e.jsx("p",{children:e.jsx(He,{to:M.path,className:"usa-button",children:"Create New"})}),e.jsx("p",{children:e.jsx(mt,{})})]})]})}const ut=({forms:t,urlForForm:s,urlForFormManager:r})=>e.jsxs("table",{className:"usa-table usa-table--stacked form-list-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"mobile-lg:grid-col-4",scope:"col",children:"Form title"}),e.jsx("th",{className:"mobile-lg:grid-col-4",scope:"col",children:"Description"}),e.jsx("th",{className:"mobile-lg:grid-col-4",scope:"col",children:"Actions"})]})}),e.jsx("tbody",{children:t.length?t.map((a,i)=>e.jsxs("tr",{children:[e.jsx("th",{"data-label":"Form title",scope:"row",children:a.title}),e.jsx("td",{"data-label":"Description",children:a.description}),e.jsx("td",{"data-label":"Actions",children:e.jsxs("div",{className:"grid-row grid-gap-md",children:[e.jsx("a",{href:s(a.id),title:a.title,className:"grid-col-auto",children:"Go to form"}),e.jsx("a",{href:`${r(a.id)}/create`,className:"grid-col-auto",children:"Edit"}),e.jsx("a",{href:`${r(a.id)}/delete`,className:"grid-col-auto",children:"Delete"})]})})]},i)):e.jsxs("tr",{children:[e.jsx("th",{"data-label":"Form title",scope:"row",children:"There are no forms here yet"}),e.jsx("td",{"data-label":"Description",children:""}),e.jsx("td",{"data-label":"Actions",children:""})]})})]}),mt=()=>e.jsx("button",{className:"usa-button",onClick:()=>{console.warn("clearing localStorage..."),window.localStorage.clear(),window.location.reload()},children:"Delete all demo data (clear browser local storage)"});class N{constructor(s,r){this.config=s,this.bp=r||fe()}bp;get form(){return this.bp}setFormSummary(s){this.bp=re(this.form,s)}async addDocument(s){const{updatedForm:r}=await xt(this.form,s);this.bp=r}addPage(){const s=H(this.config,"page");return this.bp=be(this.form,s),s}addPatternToPage(s,r=0){const a=H(this.config,s),i=this.form.patterns[this.form.root];if(i.type!=="page-set")throw new Error("expected root to be a page-set");const n=i.data.pages[r];return this.bp=je(this.form,n,a),a}removePattern(s){this.bp=ve(this.config,this.bp,s)}updatePattern(s,r){const a=G(this.config,this.form,s,r);return a.success?(this.bp=a.data,!0):(console.error("Error updating pattern",a.error),!1)}updatePatternById(s,r){const a=V(this.form,s),i=G(this.config,this.form,a,r);return i.success?(this.bp=i.data,{success:!0}):i}}const pt=async t=>t.context.enumerateIndirectObjects().map(([,s])=>s).filter(s=>s instanceof ke&&s.get($.of("Type"))===$.of("Annot")&&s.get($.of("Subtype"))===$.of("Widget")).map(s=>s),gt=async t=>{const s=await Ne.load(t),r=await pt(s);s.catalog.set($.of("AcroForm"),s.context.obj({Fields:r.map(n=>s.context.getObjectRef(n))}));const i=s.getForm().getFields();return Object.fromEntries(i.map(n=>[ye(n.getName()),ht(n)]))},ht=t=>t instanceof we?{type:"TextField",name:t.getName(),label:t.getName(),value:t.getText()||"",maxLength:t.getMaxLength(),required:t.isRequired()}:t instanceof Se?{type:"CheckBox",name:t.getName(),label:t.getName(),value:t.isChecked(),required:t.isRequired()}:t instanceof Fe?{type:"Dropdown",name:t.getName(),label:t.getName(),value:t.getSelected(),required:t.isRequired()}:t instanceof _e?{type:"OptionList",name:t.getName(),label:t.getName(),value:t.getSelected(),required:t.isRequired()}:t instanceof Pe?{type:"RadioGroup",name:t.getName(),options:t.getOptions(),label:t.getName(),value:t.getSelected()||"",required:t.isRequired()}:{type:"not-supported",name:t.getName(),error:`unsupported type: ${t.constructor.name}`},xt=async(t,s,r={fetchPdfApiResponse:Ie})=>{const a=await gt(s.data),i=await r.fetchPdfApiResponse(s.data),n=await Ee(i);if(n){t=re(t,{title:n.title||s.name,description:n.description}),t=Ce(t,n.patterns,n.root);const o=J(t,{data:s.data,path:s.name,fields:n.outputs,formFields:Object.fromEntries(Object.keys(n.outputs).map(l=>[l,n.outputs[l].name]))});return{newFields:a,updatedForm:o,errors:n.errors}}else{const o=ft(t,a),l=J(o,{data:s.data,path:s.name,fields:a,formFields:Object.fromEntries(Object.keys(a).map(c=>[c,a[c].name]))});return{newFields:a,updatedForm:l}}},ft=(t,s)=>{const r=[];return Object.entries(s).map(([a,i])=>{i.type==="CheckBox"?r.push({type:"input",id:a,data:{label:i.label,initial:"",required:!1,maxLength:128}}):i.type==="OptionList"?r.push({type:"input",id:a,data:{label:i.label,initial:"",required:!1,maxLength:128}}):i.type==="Dropdown"?r.push({type:"input",id:a,data:{label:i.label,initial:"",required:!1,maxLength:128}}):i.type==="TextField"?r.push({type:"input",id:a,data:{label:i.label,initial:"",required:!1,maxLength:128}}):i.type==="RadioGroup"?r.push({type:"input",id:a,data:{label:i.label,initial:"",required:!1,maxLength:128}}):i.type==="Paragraph"||i.type==="not-supported"&&console.error(`Skipping field: ${i.error}`)}),r.push({id:"root",type:"sequence",data:{patterns:r.map(a=>a.id)}}),De(t,r,"root")},bt=[{path:"sample-documents/ca-unlawful-detainer/ud105.pdf",title:"California UD-105 (unlawful detainer)"},{path:"sample-documents/alabama-name-change/ps-12.pdf",title:"Alabama PS-12 (name change)"},{path:"sample-documents/doj-pardon-marijuana/application_for_certificate_of_pardon_for_simple_marijuana_possession.pdf",title:"DOJ Marijuana Pardon Application"}];function jt({formId:t,formService:s}){const r=ie(),a=s.getForm(t);if(!a.success)return e.jsxs("div",{children:["Form ",t," not found."]});const i=a.data,n=()=>{s.deleteForm(t),r("/")};return e.jsxs("div",{className:"deleteFormPage grid-container",children:[e.jsx("h1",{children:"Delete form"}),e.jsxs("h2",{children:["Are you sure you want to delete the form:"," ",e.jsx("span",{className:"text-italic",children:a.data.summary.title}),"?"]}),e.jsx("p",{className:"padding-bottom-3",children:e.jsx("button",{className:"usa-button",onClick:n,children:"Delete form"})}),e.jsx("details",{children:e.jsx("pre",{children:e.jsx("code",{children:JSON.stringify(i,null,4)})})})]})}const Y=t=>{let s;const r=new Set,a=(m,f)=>{const b=typeof m=="function"?m(s):m;if(!Object.is(b,s)){const x=s;s=f??(typeof b!="object"||b===null)?b:Object.assign({},s,b),r.forEach(j=>j(s,x))}},i=()=>s,c={setState:a,getState:i,getInitialState:()=>d,subscribe:m=>(r.add(m),()=>r.delete(m)),destroy:()=>{r.clear()}},d=s=t(a,i,c);return c},vt=t=>t?Y(t):Y;var ce={exports:{}},de={},ue={exports:{}},me={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var I=p;function Nt(t,s){return t===s&&(t!==0||1/t===1/s)||t!==t&&s!==s}var yt=typeof Object.is=="function"?Object.is:Nt,wt=I.useState,St=I.useEffect,Ft=I.useLayoutEffect,_t=I.useDebugValue;function Pt(t,s){var r=s(),a=wt({inst:{value:r,getSnapshot:s}}),i=a[0].inst,n=a[1];return Ft(function(){i.value=r,i.getSnapshot=s,q(i)&&n({inst:i})},[t,r,s]),St(function(){return q(i)&&n({inst:i}),t(function(){q(i)&&n({inst:i})})},[t]),_t(r),r}function q(t){var s=t.getSnapshot;t=t.value;try{var r=s();return!yt(t,r)}catch{return!0}}function kt(t,s){return s()}var Et=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?kt:Pt;me.useSyncExternalStore=I.useSyncExternalStore!==void 0?I.useSyncExternalStore:Et;ue.exports=me;var Ct=ue.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var A=p,It=Ct;function Dt(t,s){return t===s&&(t!==0||1/t===1/s)||t!==t&&s!==s}var $t=typeof Object.is=="function"?Object.is:Dt,Rt=It.useSyncExternalStore,Ut=A.useRef,Lt=A.useEffect,At=A.useMemo,Ot=A.useDebugValue;de.useSyncExternalStoreWithSelector=function(t,s,r,a,i){var n=Ut(null);if(n.current===null){var o={hasValue:!1,value:null};n.current=o}else o=n.current;n=At(function(){function c(x){if(!d){if(d=!0,m=x,x=a(x),i!==void 0&&o.hasValue){var j=o.value;if(i(j,x))return f=j}return f=x}if(j=f,$t(m,x))return j;var W=a(x);return i!==void 0&&i(j,W)?j:(m=x,f=W)}var d=!1,m,f,b=r===void 0?null:r;return[function(){return c(s())},b===null?void 0:function(){return c(b())}]},[s,r,a,i]);var l=Rt(t,n[0],n[1]);return Lt(function(){o.hasValue=!0,o.value=l},[l]),Ot(l),l};ce.exports=de;var Tt=ce.exports;const pe=We(Tt),{useDebugValue:qt}=ae,{useSyncExternalStoreWithSelector:Bt}=pe;const Mt=t=>t;function Vt(t,s=Mt,r){const a=Bt(t.subscribe,t.getState,t.getServerState||t.getInitialState,s,r);return qt(a),a}const ee=t=>{const s=typeof t=="function"?vt(t):t,r=(a,i)=>Vt(s,a,i);return Object.assign(r,s),r},zt=t=>t?ee(t):ee,{useDebugValue:Wt}=ae,{useSyncExternalStoreWithSelector:Ht}=pe,Gt=t=>t;function Jt(t,s=Gt,r){const a=Ht(t.subscribe,t.getState,t.getServerState||t.getInitialState,s,r);return Wt(a),a}var Xt=function(){var s=p.createContext(void 0),r=function(o){var l=o.createStore,c=o.children,d=p.useRef();return d.current||(d.current=l()),p.createElement(s.Provider,{value:d.current},c)},a=function(o,l){var c=p.useContext(s);if(!c)throw new Error("Seems like you have not used zustand provider as an ancestor.");return Jt(c,o,l)},i=function(){var o=p.useContext(s);if(!o)throw new Error("Seems like you have not used zustand provider as an ancestor.");return o};return{Provider:r,useStore:a,useStoreApi:i}};const Qt=({type:t,message:s})=>e.jsx("div",{className:g("usa-alert",`usa-alert--${t}`),role:"alert","aria-live":"assertive","aria-atomic":"true",children:e.jsx("div",{className:"usa-alert__body",children:e.jsx("p",{className:"usa-alert__text",children:s})})}),ge=()=>{const{notifications:t}=u();return e.jsx("div",{className:"position-fixed z-200",style:{top:"60px",left:"50%",transform:"translateX(-50%)",maxWidth:"90%"},children:t.map(s=>e.jsx(Qt,{type:s.type,message:s.message},s.id))})},Kt=(t=5e3)=>s=>({notifications:[],addNotification:(r,a)=>{const i=crypto.randomUUID();s(l=>({notifications:[...l.notifications,{id:i,type:r,message:a}]}));const n=a.split(" ").length,o=Math.floor(n/120)*1e3;setTimeout(()=>{s(l=>({notifications:l.notifications.filter(c=>c.id!==i)}))},t+o)}}),Zt=({context:t,session:s})=>(r,a,i)=>({...Kt()(r,a,i),context:t,session:s,addPage:()=>{const n=a(),o=new N(n.context.config,n.session.form),l=o.addPage();r({session:P(n.session,{form:o.form}),focus:{pattern:l}}),n.addNotification("success","New page added successfully.")},addPattern:n=>{const o=a(),l=new N(o.context.config,o.session.form),c=X(o.session),d=l.addPatternToPage(n,c);r({session:P(o.session,{form:l.form}),focus:{pattern:d}}),o.addNotification("success","Element added successfully.")},clearFocus:()=>{r({focus:void 0})},deleteSelectedPattern:()=>{const n=a();if(n.focus===void 0)return;const o=new N(n.context.config,n.session.form);o.removePattern(n.focus.pattern.id),r({focus:void 0,session:P(n.session,{form:o.form,routeParams:{page:X(n.session).toString()}})}),n.addNotification("success","Element removed successfully.")},setFocus:function(n){const o=a();if(o.focus?.pattern.id===n)return!0;if(o.focus?.errors)return!1;const l=V(o.session.form,n);return l===void 0?(console.warn("Cannot focus on missing pattern.",n),!1):l.type==="page-set"?(console.warn("Cannot focus on page-set."),!1):(r(l?{focus:{errors:void 0,pattern:l}}:{focus:void 0}),!0)},setRouteParams:n=>{const o=a();r({session:P(o.session,{routeParams:$e(n)})})},updatePattern:n=>{const o=a(),l=new N(o.context.config,o.session.form),c=l.updatePattern(o.session.form.patterns[n.id],{[n.id]:n.data});c||console.error("Failed to update pattern.",n),c&&r({session:P(o.session,{form:l.form}),focus:void 0})},updateActivePattern:n=>{const o=a();if(o.focus===void 0)return!1;const l=new N(o.context.config,o.session.form),c=l.updatePatternById(o.focus.pattern.id,n);return c.success?(r({session:P(o.session,{form:l.form}),focus:{pattern:o.focus.pattern,errors:void 0}}),!0):(r({focus:{pattern:o.focus.pattern,errors:c.error}}),!1)}}),Yt=({context:t})=>()=>({context:t,createNewFormByPDFUrl:async s=>{const r=await es(`${t.baseUrl}${s}`),a=new N(t.config);a.setFormSummary({title:s,description:""}),await a.addDocument({name:s,data:r});const i=await t.formService.addForm(a.form);return i.success?{success:!0,data:i.data.id}:{success:!1,error:i.error}},createNewFormByPDFUpload:async s=>{const r=new N(t.config);r.setFormSummary({title:s.name,description:""}),await r.addDocument(s);const a=await t.formService.addForm(r.form);return a.success?{success:!0,data:a.data.id}:{success:!1,error:a.error}}}),es=async t=>{const r=await(await fetch(t)).blob();return new Uint8Array(await r.arrayBuffer())},{Provider:ts,useStore:ss}=Xt(),u=ss,rs=({context:t,formId:s,session:r,savePeriodically:a})=>{const i=zt((...n)=>({...Zt({context:t,session:r})(...n),...Yt({context:t})(...n),...as({context:t,formId:s,session:r})(...n)}));return a&&is(i),i},F=t=>e.jsx(ts,{createStore:()=>rs(t),children:t.children}),as=({context:t,formId:s,session:r})=>(a,i)=>({context:t,formId:s,session:r,saveStatus:{inProgress:!1},createNewForm:async function(){const n=new N(t.config);n.setFormSummary({title:`My form - ${new Date().toISOString()}`,description:""});const o=await t.formService.addForm(n.form);return o.success?{success:!0,data:o.data.id}:o},saveForm:async n=>{const{context:o,formId:l,saveStatus:c}=i();if(!c.inProgress)if(a({saveStatus:{inProgress:!0,lastSaved:c.lastSaved}}),l===void 0){const d=await o.formService.addForm(n);d.success&&a({formId:d.data.id,saveStatus:{inProgress:!1,lastSaved:d.data.timestamp}})}else{const d=await o.formService.saveForm(l,n);d.success&&a({saveStatus:{inProgress:!1,lastSaved:d.data.timestamp}})}},setSession:n=>{a({session:n})}}),is=t=>{let s;setInterval(async()=>{const{session:r,saveForm:a}=t.getState();r.form&&r.form!==s&&(await a(r.form),s=r.form)},5e3)},ns="_dropdownMenu_wzxw3_3",os="_dropdownButton_wzxw3_9",ls="_dropdownItem_wzxw3_17",cs="_usaFieldset_wzxw3_25",ds="_titleArea_wzxw3_31",us="_titleText_wzxw3_43",ms="_pageNumber_wzxw3_44",ps="_draggableListWrapper_wzxw3_50",gs="_progressPage_wzxw3_55",h={dropdownMenu:ns,dropdownButton:os,dropdownItem:ls,usaFieldset:cs,titleArea:ds,titleText:us,pageNumber:ms,draggableListWrapper:ps,progressPage:gs},hs={src:"/_astro/block-icon.zOX5LAgO.svg",width:800,height:800,format:"svg"},xs={src:"/_astro/checkbox-icon.Da7A2neh.svg",width:24,height:24,format:"svg"},fs={src:"/_astro/date-icon.DQEerUOe.svg",width:24,height:24,format:"svg"},bs={src:"/_astro/dropdown-icon.BPDZX54T.svg",width:16,height:16,format:"svg"},js={src:"/_astro/dropdownoption-icon.Czx5UR77.svg",width:24,height:24,format:"svg"},vs={src:"/_astro/longanswer-icon.7stIIJRq.svg",width:24,height:24,format:"svg"},Ns={src:"/_astro/page-icon.BheZFfgu.svg",width:24,height:24,format:"svg"},ys={src:"/_astro/shortanswer-icon.CQMFmj27.svg",width:24,height:24,format:"svg"},ws={src:"/_astro/singleselect-icon.Dy_hd69Y.svg",width:24,height:24,format:"svg"},Ss={src:"/_astro/template-icon.BDjO2I9j.svg",width:24,height:24,format:"svg"},Fs={"block-icon.svg":hs,"checkbox-icon.svg":xs,"date-icon.svg.svg":fs,"dropdown-icon.svg":bs,"dropdownoption-icon.svg":js,"longanswer-icon.svg":vs,"page-icon.svg":Ns,"shortanswer-icon.svg":ys,"singleselect-icon.svg":ws,"template-icon.svg":Ss},te=({uswdsRoot:t})=>{const{addPattern:s,context:r}=u(d=>({addPattern:d.addPattern,context:d.context})),a=u(d=>d.addPage),[i,n]=p.useState(!1),o=p.useRef(null),l=[["form-summary",r.config.patterns["form-summary"]],["fieldset",r.config.patterns.fieldset],["input",r.config.patterns.input],["paragraph",r.config.patterns.paragraph],["radio-group",r.config.patterns["radio-group"]]];p.useEffect(()=>{const d=m=>{o.current&&!o.current.contains(m.target)&&n(!1)};return document.addEventListener("mousedown",d),()=>{document.removeEventListener("mousedown",d)}},[]);const c=d=>Object.values(Fs[d])[0];return e.jsxs("fieldset",{className:`${h.usaFieldset} usa-fieldset position-sticky z-100`,children:[e.jsx("p",{className:"tablet:display-block display-none usa-label margin-top-0 font-ui-3xs text-uppercase margin-bottom-3",children:"Add Element"}),e.jsx("div",{className:"dropdownContainer margin-bottom-3",ref:o,children:e.jsxs("ul",{className:"usa-list usa-list--unstyled grid-row tablet:flex-justify-end flex-justify-center",children:[e.jsxs("li",{className:"position-relative tablet:grid-col-12 grid-col-5 text-center",children:[e.jsxs("button",{className:`${h.dropdownButton} tablet:width-full text-left width-auto text-base-darkest text-normal padding-0 bg-white border-0 cursor-pointer margin-bottom-3`,onClick:()=>n(!i),children:[e.jsx("span",{className:"tablet:display-inline-block tablet:width-auto tablet:margin-right-1 display-block width-full text-ttop text-center",children:e.jsx("svg",{className:"usa-icon",width:"24",height:"24","aria-hidden":"true",focusable:"false",role:"img",children:e.jsx("use",{xlinkHref:`${t}img/sprite.svg#add_circle`})})}),e.jsxs("span",{className:"display-inline-block text-ttop tablet:width-auto text-center",children:[e.jsx("span",{className:"display-inline-block text-ttop margin-right-1 width-9",children:"Question"}),e.jsx("img",{className:"display-inline-block text-ttop",src:c("dropdown-icon.svg"),alt:"",width:"16",height:"16"})]})]}),i&&e.jsx("ul",{className:`${h.dropdownMenu} usa-list usa-list--unstyled position-absolute width-full bg-white z-100 shadow-3 text-left`,children:l.map(([d,m],f)=>e.jsxs("li",{className:`${h.dropdownItem} padding-1 cursor-pointer margin-left-1`,onClick:()=>{s(d),n(!1)},children:[e.jsx("img",{className:"display-inline-block text-ttop margin-right-1",src:c(m.iconPath||"block-icon.svg"),alt:"",width:"24",height:"24"}),e.jsx("span",{className:"display-inline-block text-ttop",children:m.displayName})]},f))})]}),e.jsx("li",{className:"tablet:grid-col-12 grid-col-5 text-center",children:e.jsxs("button",{className:`${h.dropdownButton} tablet:width-full text-left width-auto text-base-darkest text-normal padding-0 bg-white border-0 cursor-pointer`,onClick:()=>{a()},children:[e.jsx("span",{className:"tablet:display-inline-block tablet:width-auto tablet:margin-right-1 display-block width-full text-ttop text-center",children:e.jsx("img",{className:"usa-icon",src:c("page-icon.svg"),alt:"",width:"24",height:"24"})}),e.jsx("span",{className:"display-inline-block text-ttop tablet:width-auto width-9 text-center",children:"Page"})]})})]})})]})},_s=function(s){const{context:r,setFocus:a}=u(l=>({context:l.context,setFocus:l.setFocus})),i=u(l=>{if(l.focus?.pattern.id===s._patternId)return l.focus}),n=p.useRef(null);p.useEffect(()=>{i&&i.pattern.id===s._patternId&&i.pattern.type!=="page"&&n.current?.scrollIntoView&&n.current?.scrollIntoView({behavior:"instant",block:"center"})},[i]);const o=r.editComponents[s.type];return e.jsx("div",{ref:n,onClick:l=>{o&&(l.stopPropagation(),a(s._patternId))},onFocus:l=>{o&&(l.stopPropagation(),a(s._patternId))},children:e.jsx(o,{context:r,previewProps:s,focus:i})})},Ps=()=>{const t=u(i=>i.session),{context:s,setRouteParams:r}=u(i=>({context:i.context,setRouteParams:i.setRouteParams})),a=ne();return p.useEffect(()=>{const i=a.search.startsWith("?")?a.search.substring(1):a.search;r(i)},[a]),e.jsx("div",{className:"grid-container",children:e.jsxs("div",{className:"grid-row position-relative",children:[e.jsx("div",{className:"desktop:grid-col-2 tablet:grid-col-3 tablet:display-block grid-col-12 display-none padding-y-3 padding-right-3",children:e.jsx(te,{uswdsRoot:s.uswdsRoot})}),e.jsx("div",{className:"desktop:grid-col-10 tablet:grid-col-9 grid-col-12 tablet:border-left tablet:border-bottom tablet:border-right tablet:border-left-2px tablet:border-base-lighter bg-primary-lighter contentWrapper",children:e.jsx("div",{className:"grid-col-12",children:e.jsx(oe,{isPreview:!0,context:{config:s.config,components:ks(s.components),uswdsRoot:s.uswdsRoot},session:t})})}),e.jsx("div",{className:"tablet:display-none grid-col-12 padding-y-3",children:e.jsx(te,{uswdsRoot:s.uswdsRoot})})]})})},ks=t=>{const s={};for(const r of Object.keys(t))s[r]=_s;return s},Es=()=>{const t=u(s=>s.session.form);return e.jsx("pre",{children:e.jsx("code",{children:JSON.stringify(t,null,2)})})},Cs=t=>new Promise((s,r)=>{const a=new FileReader;a.onload=()=>{s(a.result)},a.onerror=r,a.readAsArrayBuffer(t)}),Is=t=>s=>{if(s.target.files&&s.target.files.length>0){const r=s.target.files[0];Cs(r).then(a=>{t({name:r.name,data:new Uint8Array(a)})})}};function Ds(){const t=ie(),s=u(a=>({context:a.context,createNewForm:a.createNewForm,createNewFormByPDFUpload:a.createNewFormByPDFUpload,createNewFormByPDFUrl:a.createNewFormByPDFUrl,addNotification:a.addNotification})),r=async a=>{try{const i=await s.createNewFormByPDFUrl(a);i.success?t(`/${i.data}/create`,{state:{result:i}}):s.addNotification("error","Sorry, but there was an error importing the form.")}catch(i){i.message&&s.addNotification("error",i.message)}};return e.jsxs(e.Fragment,{children:[e.jsx(ge,{}),e.jsxs("ul",{className:"usa-card-group",children:[e.jsx("li",{className:"usa-card tablet:grid-col-6",children:e.jsxs("div",{className:"usa-card__container border-1px border-base-lighter radius-md",children:[e.jsx("div",{className:"usa-card__header",children:e.jsx("h2",{className:"usa-card__heading",children:"Start from Scratch"})}),e.jsx("div",{className:"usa-card__media bg-primary-lighter",children:e.jsx("div",{className:"usa-card__img bg-primary-lighter",children:e.jsx("svg",{className:"usa-icon usa-icon--size-9 margin-y-3 margin-x-auto text-middle display-block bg-blue-vivid-60 text-primary","aria-hidden":"true",focusable:"false",role:"img",children:e.jsx("use",{xlinkHref:`${s.context.uswdsRoot}img/sprite.svg#add`})})})}),e.jsx("div",{className:"usa-card__body margin-bottom-4",children:e.jsx("p",{children:"Jump in and build your form from an empty canvas."})}),e.jsx("div",{className:"usa-card__footer",children:e.jsx("button",{className:"usa-button",onClick:async()=>{const a=await s.createNewForm();a.success&&t(`/${a.data}/create`)},children:"Create New"})})]})}),e.jsx("li",{className:"usa-card tablet:grid-col-6",children:e.jsxs("div",{className:"usa-card__container border-1px border-base-lighter radius-md",children:[e.jsx("div",{className:"usa-card__header",children:e.jsx("h2",{className:"usa-card__heading",children:"Start from Import"})}),e.jsx("div",{className:"usa-card__media bg-primary-lighter",children:e.jsx("div",{className:"usa-card__img bg-primary-lighter",children:e.jsx("svg",{className:"usa-icon usa-icon--size-9 margin-y-3 margin-x-auto text-middle display-block bg-blue-vivid-60 text-primary","aria-hidden":"true",focusable:"false",role:"img",children:e.jsx("use",{xlinkHref:`${s.context.uswdsRoot}img/sprite.svg#upload_file`})})})}),e.jsx("div",{className:"usa-card__body margin-bottom-4",children:e.jsx("p",{children:"Mold your new form from imported pdf contents."})}),e.jsxs("div",{className:"usa-card__footer",children:[e.jsxs("div",{className:"usa-file-input usa-sr-only",children:[e.jsx("div",{className:"usa-sr-only","aria-live":"polite",children:"No files selected."}),e.jsxs("div",{className:"usa-file-input__target",children:[e.jsx("div",{className:"usa-file-input__box"}),e.jsxs("div",{className:"usa-file-input__instructions","aria-hidden":"true",children:["Drag file here or"," ",e.jsx("span",{className:"usa-file-input__choose",children:"choose from folder"})]}),e.jsx("input",{className:"usa-file-input__input",id:"file-input-specific","aria-describedby":"file-input-specific-hint",type:"file",accept:".pdf",onChange:Is(async a=>{const i=await s.createNewFormByPDFUpload(a);i.success&&t(`/${i.data}/create`,{state:{result:i}})})})]})]}),e.jsx("label",{className:"usa-button",id:"file-input-specific-hint",htmlFor:"file-input-specific",children:"Upload File"})]})]})})]}),e.jsx("div",{className:"usa-section",children:e.jsxs("details",{children:[e.jsx("summary",{children:"Or use an example file, selected for testing purposes:"}),e.jsx("ul",{children:bt.map((a,i)=>e.jsx("li",{children:e.jsx($s,{callback:r,documentPath:a.path})},i))})]})})]})}const $s=({callback:t,documentPath:s})=>e.jsx("button",{className:"usa-button--unstyled",onClick:async()=>{await t(s)},children:s});function Rs({formService:t}){return t.getFormList().success?e.jsx("section",{className:"usa-section grid-container",children:e.jsx("div",{className:"grid-row flex-justify-center",children:e.jsxs("div",{className:"grid-col-12 tablet:grid-col-10 desktop:grid-col-7",children:[e.jsxs("header",{className:"text-center margin-bottom-1 tablet:margin-bottom-6",children:[e.jsx("h1",{className:"margin-bottom-1",children:"Create a New Form"}),e.jsx("p",{className:"margin-top-0",children:"Create or Import a form to start building your guided application."})]}),e.jsx(Ds,{})]})})}):e.jsx("div",{children:"Error loading form list"})}const Us="_editPage_1tirh_6",Ls="_savedStatus_1tirh_11",he={editPage:Us,savedStatus:Ls};var R=(t=>(t[t.upload=1]="upload",t[t.create=2]="create",t[t.configure=3]="configure",t[t.publish=4]="publish",t[t.preview=5]="preview",t))(R||{});const U=(t,s)=>t<s?"usa-step-indicator__segment--complete":t===s?"usa-step-indicator__segment--current":"",L=(t,s)=>t<s?e.jsx("span",{className:"usa-sr-only",children:"completed"}):t===s?void 0:e.jsx("span",{className:"usa-sr-only",children:"not completed"}),As=({curPage:t,preview:s})=>{const r=u(i=>i.context.uswdsRoot),a=u(i=>i.saveStatus.lastSaved);return e.jsxs("div",{className:"position-sticky top-0 z-100 bg-white border-bottom border-bottom-width-1px border-base-lighter padding-1",children:[e.jsxs("div",{className:"grid-container grid-row margin-bottom-105 display-block tablet:display-none",children:[e.jsxs("div",{className:"grid-row",children:[e.jsx("div",{className:"grid-col-6",children:e.jsx(se,{uswdsRoot:r})}),e.jsxs("div",{className:"grid-col-6 text-base text-right font-ui-3xs padding-left-4",children:[e.jsx("span",{className:"padding-right-2",children:"Saved"}),s&&e.jsx(Os,{url:s,uswdsRoot:r})]})]}),e.jsx(Ts,{curPage:t})]}),e.jsx("div",{className:"display-none tablet:display-block margin-top-1 margin-bottom-1",children:e.jsx("div",{className:"grid-container",children:e.jsxs("div",{className:"grid-row margin-bottom-0 classes usa-step-indicator ","aria-label":"progress",children:[e.jsx("div",{className:"margin-top-1 grid-col-2",children:e.jsx(se,{uswdsRoot:r})}),e.jsxs("ol",{className:"usa-step-indicator__segments desktop:grid-col-6 tablet:grid-col-5",children:[e.jsx("li",{className:g("usa-step-indicator__segment",U(1,t)),children:e.jsxs("span",{className:"usa-step-indicator__segment-label",children:["Upload ",L(1,t)]})}),e.jsx("li",{className:g("usa-step-indicator__segment font-body-xs",U(2,t)),children:e.jsxs("span",{className:"usa-step-indicator__segment-label",children:["Create ",L(2,t)]})}),e.jsx("li",{className:g("usa-step-indicator__segment font-body-xs",U(3,t)),"aria-current":"true",children:e.jsxs("span",{className:"usa-step-indicator__segment-label",children:["Configure ",L(3,t)]})}),e.jsx("li",{className:g("usa-step-indicator__segment font-body-xs",U(4,t)),children:e.jsxs("span",{className:"usa-step-indicator__segment-label",children:["Publish ",L(4,t)]})})]}),e.jsxs("div",{className:"desktop:grid-col-4 tablet:grid-col-5 text-right",children:[e.jsx("span",{className:`text-base font-ui-3xs padding-left-1 display-inline-block text-middle ${he.savedStatus}`,children:a?"Saved "+a.toLocaleDateString("en-us",{month:"short",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}):"Blueprint loaded"}),s&&e.jsx("a",{href:s,className:"usa-button usa-button--outline margin-left-1 display-inline-block text-middle",children:"Preview"})]})]})})})]})},se=({uswdsRoot:t})=>e.jsxs("a",{href:B.getUrl(),className:"usa-link margin-right-1 display-block",children:[e.jsx("svg",{className:"usa-icon usa-icon--size-3 text-middle margin-right-1","aria-hidden":"true",focusable:"false",role:"img",children:e.jsx("use",{xlinkHref:`${t}img/sprite.svg#arrow_back`})}),"My Forms"]}),Os=({url:t,uswdsRoot:s})=>e.jsx("a",{href:t,className:"usa-link tablet:margin-right-4","aria-label":"Preview this blueprint",children:e.jsx("svg",{className:"usa-icon","aria-hidden":"true",focusable:"false",role:"img",children:e.jsx("use",{xlinkHref:`${s}img/sprite.svg#visibility`})})}),Ts=({curPage:t})=>e.jsxs("div",{className:"grid-row grid-gap flex-align-center",children:[e.jsx("div",{className:"grid-col grid-col-4",children:e.jsxs("span",{className:"usa-step-indicator__heading-counter",children:[e.jsx("span",{className:"usa-sr-only",children:"Step"}),e.jsx("span",{className:"usa-step-indicator__current-step",children:"1"}),e.jsx("span",{className:"usa-step-indicator__total-steps margin-left-05",children:"of 3"})," "]})}),e.jsx("div",{className:"grid-col grid-col-8",children:e.jsxs("select",{className:"usa-select",name:"options",id:"options",defaultValue:t,children:[e.jsx("option",{value:1,children:"Upload"}),e.jsx("option",{value:2,children:"Create"}),e.jsx("option",{value:3,children:"Configure"}),e.jsx("option",{value:4,children:"Publish"})]})})]}),qs=({back:t,close:s,next:r})=>e.jsx("div",{className:"position-sticky bottom-0 bg-white padding-2 border-top border-bottom border-base-lighter",children:e.jsxs("div",{className:"grid-container grid-row tablet:flex-justify-end flex-justify-center width-full",children:[t&&e.jsx("a",{className:"usa-button usa-button--outline tablet:grid-col-auto grid-col-5",href:t,children:"Back"}),s&&e.jsx("a",{className:"usa-button usa-button--outline tablet:grid-col-auto grid-col-5",href:s,children:"Close"}),r&&e.jsx("a",{className:"usa-button tablet:grid-col-auto grid-col-5",href:r,children:"Next"})]})}),_=({children:t,step:s,back:r,close:a,next:i,preview:n})=>{const o=ne(),{addNotification:l}=u();return p.useEffect(()=>{o?.state?.result?.success&&l("success","Form import was successful.")},[]),e.jsxs(e.Fragment,{children:[e.jsx(ge,{}),s&&e.jsx(As,{curPage:s,preview:n}),e.jsx("section",{className:`${he.editPage} position-relative`,children:e.jsx("div",{className:"grid-row flex-justify-center",children:e.jsx("div",{className:"grid-col-12",children:e.jsx("div",{className:"bg-white",children:t})})})}),s&&e.jsx(qs,{back:r,next:i,close:a})]})},Bs=()=>{const{context:t,setSession:s}=u(i=>({context:i.context,setSession:i.setSession})),r=u(i=>i.session),{routeParams:a}=Ge();return p.useEffect(()=>{if(a.page!==r.routeParams?.page){const i=P(r,{routeParams:a});s(i)}},[a]),e.jsx(oe,{isPreview:!0,context:t,session:r})};function Ms({context:t}){return e.jsx(Je,{children:e.jsxs(Xe,{children:[e.jsx(v,{path:B.path,Component:()=>e.jsx(F,{context:t,session:Q,children:e.jsx(_,{children:e.jsx(dt,{formService:t.formService,urlForForm:t.urlForForm,urlForFormManager:t.urlForFormManager})})})}),e.jsx(v,{path:M.path,Component:()=>e.jsx(F,{context:t,session:Q,children:e.jsx(_,{children:e.jsx(Rs,{formService:t.formService})})})}),e.jsx(v,{path:lt.path,Component:()=>{const{formId:s}=E();if(s===void 0)return e.jsx("div",{children:"formId is undefined"});const r=t.formService.getForm(s);return r.success?e.jsx(F,{context:t,formId:s,session:D(r.data),children:e.jsx(_,{children:e.jsx(Es,{})})}):e.jsx("div",{children:"Error loading form preview"})}}),e.jsx(v,{path:C.path,Component:()=>{const{formId:s}=E();if(s===void 0)return e.jsx("div",{children:"formId is undefined"});const r=t.formService.getForm(s);return r.success?e.jsx(F,{context:t,formId:s,session:D(r.data),children:e.jsx(_,{step:R.preview,preview:C.getUrl(s),back:O.getUrl(s),children:e.jsx(Bs,{})})}):e.jsx("div",{children:"Error loading form preview"})}}),e.jsx(v,{path:O.path,Component:()=>{const{formId:s}=E(),[r]=Qe();if(s===void 0)return e.jsx("div",{children:"formId is undefined"});const a=t.formService.getForm(s);return a.success?e.jsx(F,{context:t,formId:s,session:D(a.data,r.toString()),savePeriodically:!0,children:e.jsx(_,{step:R.create,back:M.getUrl(),next:T.getUrl(s),preview:C.getUrl(s),children:e.jsx(Ps,{})})}):e.jsx("div",{children:"Form not found"})}}),e.jsx(v,{path:T.path,Component:()=>{const{formId:s}=E();if(s===void 0)return e.jsx("div",{children:"formId is undefined"});const r=t.formService.getForm(s);return r.success?e.jsx(F,{context:t,formId:s,session:D(r.data),children:e.jsx(_,{step:R.configure,back:O.getUrl(s),next:Z.getUrl(s),preview:C.getUrl(s),children:e.jsx("div",{className:`${h.progressPage} grid-container`,children:e.jsx("div",{className:"grid-row",children:e.jsxs("div",{className:"grid-col-12",children:[e.jsxs("h1",{className:"font-body-3xl text-center bg-primary-darker padding-3 text-base-lightest",children:[e.jsx("span",{children:"Coming Soon.."}),e.jsx("svg",{className:"usa-icon","aria-hidden":"true",focusable:"false",role:"img",children:e.jsx("use",{xlinkHref:`${t.uswdsRoot}img/sprite.svg#construction_worker`})})]}),e.jsx("h2",{className:"font-ui-xl",children:"Form Approval and Settings"}),e.jsxs("h3",{className:"font-ui-lg",children:[e.jsx("svg",{className:"usa-icon display-inline-block text-ttop margin-right-1 text-accent-warm","aria-hidden":"true",focusable:"false",role:"img",children:e.jsx("use",{xlinkHref:`${t.uswdsRoot}img/sprite.svg#warning`})}),e.jsx("span",{className:"display-inline-block text-ttop",children:"Work in Progress - Hello, DOJ Pardon Office!"}),e.jsx("svg",{className:"usa-icon display-inline-block text-ttop margin-left-1 text-accent-warm","aria-hidden":"true",focusable:"false",role:"img",children:e.jsx("use",{xlinkHref:`${t.uswdsRoot}img/sprite.svg#warning`})})]}),e.jsx("p",{className:"font-ui-md",children:"On this page, you can add additional settings to your form, gather and review feedback by colleagues and share the form for supervisor review."}),e.jsx("p",{className:"font-ui-md",children:"Unprioritized Upcoming Feature List:"}),e.jsxs("ul",{className:"usa-list font-ui-md",children:[e.jsx("li",{children:"Commenting tools for colleagues"}),e.jsx("li",{children:"Commenting and review tools for supervisors"}),e.jsx("li",{children:"Tracking form edit changes by multiple form builders"}),e.jsx("li",{children:"Form branding tools"}),e.jsx("li",{children:"Guided process to include additional forms in the form application"})]})]})})})})}):"Form not found"}}),e.jsx(v,{path:Z.path,Component:()=>{const{formId:s}=E();if(s===void 0)return e.jsx("div",{children:"formId is undefined"});const r=t.formService.getForm(s);if(!r.success)return"Form not found";const a=D(r.data);return e.jsx(F,{context:t,formId:s,session:a,children:e.jsx(_,{step:R.publish,back:T.getUrl(s),close:B.getUrl(),preview:C.getUrl(s),children:e.jsx("div",{className:`${h.progressPage} grid-container`,children:e.jsx("div",{className:"grid-row",children:e.jsxs("div",{className:"grid-col-12",children:[e.jsxs("h1",{className:"font-body-3xl text-center bg-primary-darker padding-3 text-base-lightest",children:[e.jsx("span",{children:"Coming Soon.."}),e.jsx("svg",{className:"usa-icon","aria-hidden":"true",focusable:"false",role:"img",children:e.jsx("use",{xlinkHref:`${t.uswdsRoot}img/sprite.svg#construction_worker`})})]}),e.jsx("h2",{className:"font-ui-xl",children:"Publish"}),e.jsx("p",{className:"font-ui-md",children:"On this page, you can review the pdf preview of your created form and publish it. The exact contents of this page are subject to change following additional user research."}),e.jsx("p",{className:"font-ui-md",children:"Unprioritized Upcoming Feature List:"}),e.jsxs("ul",{className:"usa-list font-ui-md",children:[e.jsx("li",{children:"A scrollable pdf view"}),e.jsx("li",{children:"A publish option for the page"})]}),e.jsx("p",{children:e.jsx("a",{href:C.getUrl(s),className:"usa-button usa-button--big margin-top-3",children:"Publish"})})]})})})})})}}),e.jsx(v,{path:ct.path,Component:()=>{const{formId:s}=E();return s===void 0?e.jsx("div",{children:"formId is undefined"}):e.jsx(jt,{formId:s,formService:t.formService})}})]})})}const k=({children:t})=>{const s=u(a=>a.context),{deleteSelectedPattern:r}=u(a=>({deleteSelectedPattern:a.deleteSelectedPattern}));return e.jsx(e.Fragment,{children:e.jsx("div",{className:"border-top-1px border-base-lighter margin-top-2 margin-bottom-2 padding-top-1 width-full text-right pattern-edit-panel base-dark",children:e.jsxs("span",{className:g("display-inline-block",{"border-base-lighter":t,"padding-right-1":t,"margin-right-1":t}),children:[e.jsx("button",{type:"button","aria-label":"Create a copy of this pattern",title:"Create a copy of this pattern",className:"usa-button--outline usa-button--unstyled",onClick:a=>{a.preventDefault(),alert("Unimplemented")},children:e.jsx("svg",{className:"usa-icon usa-icon--size-3 margin-1 text-middle","aria-hidden":"true",focusable:"false",role:"img",children:e.jsx("use",{xlinkHref:`${s.uswdsRoot}img/sprite.svg#content_copy`})})}),e.jsx("button",{type:"button","aria-label":"Delete this pattern",title:"Delete this pattern",className:"usa-button--outline usa-button--unstyled",onClick:a=>{a.preventDefault(),r()},children:e.jsx("svg",{className:"usa-icon usa-icon--size-3 margin-1 text-middle","aria-hidden":"true",focusable:"false",role:"img",children:e.jsx("use",{xlinkHref:`${s.uswdsRoot}img/sprite.svg#delete`})})}),e.jsx("button",{type:"submit","aria-label":"Save changes to this pattern",title:"Save changes to this pattern",className:"usa-button--outline usa-button--unstyled text-success hover:text-success",children:e.jsx("svg",{className:"usa-icon usa-icon--size-3 margin-1 text-middle","aria-hidden":"true",focusable:"false",role:"img",children:e.jsx("use",{xlinkHref:`${s.uswdsRoot}img/sprite.svg#check`})})}),t?e.jsx("span",{className:"margin-left-1 padding-left-2 border-left-1px border-base-lighter",children:t}):null]})})})},w=({pattern:t,editComponent:s})=>{const{clearFocus:r,updateActivePattern:a}=u(o=>({clearFocus:o.clearFocus,updateActivePattern:o.updateActivePattern})),i=u(o=>o.focus),n=Ke({defaultValues:{[t.id]:t}});return p.useEffect(()=>{n.clearErrors(),Object.entries(i?.errors||{}).forEach(([o,l])=>{n.setError(`${i?.pattern.id}.${o}`,Vs(l))})},[i]),e.jsx(Ze,{...n,children:e.jsx("form",{onBlur:n.handleSubmit(o=>{a(o)}),onSubmit:n.handleSubmit(o=>{a(o)&&r()}),children:e.jsx("div",{className:"border-1 radius-md border-primary-light padding-1",children:s})})})},Vs=t=>t.type==="required"?{type:"required",message:t.message}:{type:"custom",message:t.message},S=t=>{const{formState:s,getFieldState:r,register:a}=Ye();return{errors:s.errors,fieldId:i=>`${t}.${i}`,register:i=>a(`${t}.${i}`),getFieldState:i=>r(`${t}.${i}`,s)}},zs=({focus:t,previewProps:s})=>e.jsx(e.Fragment,{children:t?e.jsx(w,{pattern:t.pattern,editComponent:e.jsx(Ws,{pattern:t.pattern})}):e.jsx(et,{...s})}),Ws=({pattern:t})=>{const{fieldId:s,getFieldState:r,register:a}=S(t.id),i=r("label");return e.jsxs("div",{className:"grid-row grid-gap",children:[e.jsxs("div",{className:"tablet:grid-col-6 mobile-lg:grid-col-12",children:[e.jsx("label",{className:g("usa-label",{"usa-label--error":i.error}),htmlFor:s("label"),children:y.patterns.checkbox.fieldLabel}),i.error?e.jsx("span",{className:"usa-error-message",role:"alert",children:i.error.message}):null,e.jsx("input",{className:"usa-input",id:s("label"),defaultValue:t.data.label,...a("label"),type:"text"})]}),e.jsx("div",{className:"tablet:grid-col-6 mobile-lg:grid-col-12",children:e.jsxs("div",{className:"usa-checkbox",children:[e.jsx("input",{id:s("defaultChecked"),type:"checkbox",...a("defaultChecked"),className:"usa-checkbox__input"}),e.jsx("label",{className:"usa-checkbox__label",htmlFor:s("defaultChecked"),children:y.patterns.checkbox.defaultFieldValue})]})}),e.jsx("div",{className:"grid-col-12",children:e.jsx(k,{})})]})},Hs=({focus:t,previewProps:s})=>e.jsx(e.Fragment,{children:t?e.jsx(w,{pattern:t.pattern,editComponent:e.jsx(Js,{patternId:t.pattern.id})}):e.jsx(Gs,{...s})}),Gs=t=>{const s=u(r=>r.session.form.patterns[t._patternId]);return e.jsx(e.Fragment,{children:e.jsxs(le,{...t,children:[s&&s.data.patterns.length===0&&e.jsx("div",{className:"usa-alert usa-alert--warning usa-alert--no-icon margin-bottom-3",children:e.jsx("div",{className:"usa-alert__body",children:e.jsxs("p",{className:"usa-alert__text",children:[e.jsx("span",{className:"alert-text display-inline-block text-top margin-right-2",children:"Empty sections will not display."}),e.jsx("span",{className:"action-text add-question display-inline-block margin-right-2",children:e.jsx("a",{className:"usa-link",href:"#",children:"Add question"})}),e.jsx("span",{className:"action-text remove-section display-inline-block text-top margin-right-2",children:e.jsx("a",{className:"usa-link",href:"#",children:"Remove section"})})]})})}),t.children]})})},Js=({patternId:t})=>{const s=u(o=>o.session.form.patterns[t]),{fieldId:r,getFieldState:a,register:i}=S(t),n=a("legend");return e.jsxs("div",{className:"grid-row",children:[e.jsxs("div",{className:"grid-col-12 margin-bottom-3 flex-align-self-end",children:[e.jsx("input",{type:"hidden",...i("patterns"),defaultValue:s.data.patterns}),e.jsxs("label",{className:g("usa-label width-full maxw-full",{"usa-label--error":n.error}),htmlFor:r("legend"),children:["Legend Text Element",n.error?e.jsx("span",{className:"usa-error-message",role:"alert",children:n.error.message}):null,e.jsx("input",{className:g("usa-input bg-primary-lighter text-bold",{"usa-input--error":n.error}),id:r("legend"),defaultValue:s.data.legend,...i("legend"),type:"text"})]})]}),e.jsx(le,{type:"fieldset",_patternId:t}),e.jsx(k,{})]})},Xs=({focus:t,previewProps:s})=>e.jsx(e.Fragment,{children:t?e.jsx(w,{pattern:t.pattern,editComponent:e.jsx(Qs,{pattern:t.pattern})}):e.jsx(tt,{...s})}),Qs=({pattern:t})=>{const s=t.id,{getFieldState:r,fieldId:a,register:i}=S(s),n=r("description"),o=r("title");return e.jsxs("div",{className:"grid-row grid-gap-1",children:[e.jsx("div",{className:"desktop:grid-col-6 mobile:grid-col-12",children:e.jsxs("label",{className:g("usa-label",{"usa-label--error":o.error}),htmlFor:a("title"),children:["Title",o.error?e.jsx("span",{className:"usa-error-message",role:"alert",children:o.error.message}):null,e.jsx("input",{id:a("title"),className:"usa-input bg-primary-lighter text-bold",...i("title"),defaultValue:t.data.title,type:"text"})]})}),e.jsx("div",{className:"desktop:grid-col-6 mobile:grid-col-12",children:e.jsxs("label",{className:g("usa-label",{"usa-input--error":n.error}),htmlFor:a("description"),children:["Description",n.error?e.jsx("span",{className:"usa-error-message",role:"alert",children:n.error.message}):null,e.jsx("textarea",{id:a("description"),className:"usa-textarea bg-primary-lighter text-bold",...i("description"),defaultValue:t.data.description})]})}),e.jsx("div",{className:"grid-col-12",children:e.jsx(k,{})})]})},Ks=({focus:t,previewProps:s})=>e.jsx(e.Fragment,{children:t?e.jsx(w,{pattern:t.pattern,editComponent:e.jsx(Zs,{patternId:t.pattern.id})}):e.jsx(st,{...s})}),Zs=({patternId:t})=>{const s=u(d=>d.session.form.patterns[t]),{fieldId:r,register:a,getFieldState:i}=S(t),n=i("initial"),o=i("label"),l=i("maxLength"),c=s.data.maxLength>0?{defaultValue:s.data.maxLength}:{};return e.jsxs("div",{className:"grid-row grid-gap-1",children:[e.jsx("div",{className:"tablet:grid-col-6 mobile-lg:grid-col-12",children:e.jsxs("label",{className:g("usa-label",{"usa-label--error":o.error}),htmlFor:r("label"),children:[y.patterns.input.fieldLabel,o.error?e.jsx("span",{className:"usa-error-message",role:"alert",children:o.error.message}):null,e.jsx("input",{className:g("usa-input bg-primary-lighter text-bold",{"usa-input--error":o.error}),id:r("label"),defaultValue:s.data.label,...a("label"),type:"text"})]})}),e.jsx("div",{className:"tablet:grid-col-6 mobile-lg:grid-col-12 ohio",children:e.jsxs("label",{className:g("usa-label",{"usa-label--error":n.error}),htmlFor:r("initial"),children:[n.error?e.jsx("span",{className:"usa-error-message",role:"alert",children:n.error.message}):null,y.patterns.input.defaultFieldValue,e.jsx("input",{className:"usa-input bg-primary-lighter text-bold",id:r("initial"),type:"text",defaultValue:s.data.initial,...a("initial")})]})}),e.jsx("div",{className:"tablet:grid-col-6 mobile-lg:grid-col-12",children:e.jsxs("label",{className:g("usa-label",{"usa-label--error":l.error}),htmlFor:r("maxLength"),children:[l.error?e.jsx("span",{className:"usa-error-message",role:"alert",children:l.error.message}):null,y.patterns.input.maxLength,e.jsx("input",{className:"usa-input bg-primary-lighter text-bold",id:r("maxLength"),...c,type:"text",...a("maxLength")})]})}),e.jsx("div",{className:"grid-col-12",children:e.jsx(k,{children:e.jsxs("span",{className:"usa-checkbox",children:[e.jsx("input",{style:{display:"inline-block"},className:"usa-checkbox__input bg-primary-lighter",type:"checkbox",id:r("required"),...a("required"),defaultChecked:s.data.required}),e.jsx("label",{style:{display:"inline-block"},className:"usa-checkbox__label",htmlFor:r("required"),children:"Required"})]})})})]})},Ys=({children:t,order:s,updateOrder:r})=>{const a=Re(K(ze),K(Ve,{coordinateGetter:Me})),i=p.Children.toArray(t);return e.jsx("div",{onFocus:n=>{n.stopPropagation()},children:e.jsx(Ue,{sensors:a,collisionDetection:Le,onDragEnd:n=>{const{active:o,over:l}=n;if(l!==null&&o.id!==l.id){const c=s.indexOf(o.id),d=s.indexOf(l.id),m=Ae(s,c,d);r(m)}},children:e.jsx(Oe,{items:s,strategy:Te,children:i.map((n,o)=>{const l=s[o];return e.jsx(er,{id:l,children:n},l)})})})})},er=({id:t,children:s})=>{const{attributes:r,listeners:a,setNodeRef:i,transform:n,transition:o}=qe({id:t}),l=u(c=>c.context);return e.jsx("div",{className:`${h.draggableListWrapper} draggable-list-item-wrapper bg-white margin-bottom-3 padding-3`,ref:i,style:{transform:Be.Transform.toString(n),transition:o},children:e.jsxs("div",{className:"grid-row grid-gap draggable-list-item cursor-pointer",children:[e.jsx("div",{className:"grid-col-12 width-full draggable-list-button cursor-grab margin-top-2 margin-bottom-2",...a,...r,children:e.jsx("svg",{className:"usa-icon margin-x-auto display-block","aria-hidden":"true",focusable:"false",role:"img",children:e.jsx("use",{xlinkHref:`${l.uswdsRoot}img/sprite.svg#drag_handle`})})}),e.jsx("div",{className:"grid-col-12 grid-col",children:s})]})})},xe=t=>{const s=u(i=>i.session.form),r=u(i=>i.updatePattern),a=V(s,t.previewProps._patternId);return a?e.jsx(Ys,{order:a.data.patterns,updateOrder:i=>{r({...a,data:{...a.data,patterns:i}})},children:t.previewProps.children}):(console.log("Skipping sequence pattern preview: pattern not found.",t.previewProps._patternId),null)},tr=t=>e.jsxs(e.Fragment,{children:[t.focus?e.jsx(w,{pattern:t.focus.pattern,editComponent:e.jsx(sr,{pattern:t.focus.pattern})}):e.jsxs("div",{className:`${h.titleArea} display-flex flex-justify flex-align-center position-relative margin-bottom-205`,children:[e.jsxs("span",{className:`${h.titleText} padding-right-1 text-uppercase text-ls-1 text-base-darkest bg-primary-lighter`,children:[t.previewProps.title||"untitled page"," ",e.jsx("span",{className:"text-secondary-darker",children:"*"})]}),e.jsx("span",{className:`${h.pageNumber} padding-left-1 text-base-darkest bg-primary-lighter`,children:"Page X"})]}),e.jsx(xe,{context:t.context,previewProps:{type:"sequence",_patternId:t.previewProps._patternId,children:t.previewProps.children}})]}),sr=({pattern:t})=>{const{fieldId:s,getFieldState:r,register:a}=S(t.id),i=r("title");return e.jsxs("div",{className:"grid-row grid-gap",children:[e.jsx("input",{type:"hidden",...a("patterns"),defaultValue:t.data.patterns}),e.jsxs("div",{className:"tablet:grid-col-6 mobile-lg:grid-col-12",children:[e.jsx("label",{className:g("usa-label",{"usa-label--error":i.error}),htmlFor:s("title"),children:y.patterns.page.fieldLabel}),i.error?e.jsx("span",{className:"usa-error-message",role:"alert",children:i.error.message}):null,e.jsx("input",{className:"usa-input",type:"text",id:s("title"),defaultValue:t.data.title,...a("title")})]}),e.jsx("div",{className:"grid-col-12",children:e.jsx(k,{})})]})},rr=({previewProps:t})=>e.jsx(e.Fragment,{children:e.jsx(rt,{...t})}),ar=({focus:t,previewProps:s})=>e.jsx(e.Fragment,{children:t?e.jsx(w,{pattern:t.pattern,editComponent:e.jsx(ir,{patternId:t.pattern.id})}):e.jsx(at,{...s})}),ir=({patternId:t})=>{const s=u(o=>o.session.form.patterns[t]),{fieldId:r,getFieldState:a,register:i}=S(t),n=a("text");return e.jsxs("div",{className:"grid-row grid-gap-1",children:[e.jsxs("div",{className:"tablet:grid-col-12",children:[e.jsx("label",{className:g("usa-label",{"usa-label--error":n.error}),htmlFor:r("text"),children:y.patterns.paragraph.fieldLabel}),n.error?e.jsx("span",{className:"usa-error-message",role:"alert",children:n.error.message}):null,e.jsx("textarea",{id:r("text"),className:"usa-textarea bg-primary-lighter text-bold",style:{height:"unset"},rows:4,...i("text"),defaultValue:s.data.text})]}),e.jsx(k,{})]})},nr=({focus:t,previewProps:s})=>e.jsx(e.Fragment,{children:t?e.jsx(w,{pattern:t.pattern,editComponent:e.jsx(or,{pattern:t.pattern})}):e.jsx(it,{...s})}),or=({pattern:t})=>{const{fieldId:s,getFieldState:r,register:a}=S(t.id),[i,n]=p.useState(t.data.options),o=r("label");return e.jsxs("div",{className:"grid-row grid-gap",children:[e.jsx("div",{className:"tablet:grid-col-6 mobile-lg:grid-col-12",children:e.jsxs("label",{className:g("usa-label",{"usa-label--error":o.error}),children:[y.patterns.radioGroup.fieldLabel,o.error?e.jsx("span",{className:"usa-error-message",role:"alert",children:o.error.message}):null,e.jsx("input",{className:"usa-input",id:s("label"),defaultValue:t.data.label,...a("label"),type:"text"})]})}),e.jsxs("div",{className:"tablet:grid-col-6 mobile-lg:grid-col-12",children:[i.map((l,c)=>{const d=r(`options.${c}.id`),m=r(`options.${c}.label`);return e.jsxs("div",{children:[d.error?e.jsx("span",{className:"usa-error-message",role:"alert",children:d.error.message}):null,m.error?e.jsx("span",{className:"usa-error-message",role:"alert",children:m.error.message}):null,e.jsxs("div",{className:"display-flex",children:[e.jsx("input",{className:g("hide","usa-input",{"usa-label--error":o.error}),id:s(`options.${c}.id`),...a(`options.${c}.id`),defaultValue:l.id,"aria-label":`Option ${c+1} id`}),e.jsx("input",{className:"usa-input",id:s(`options.${c}.label`),...a(`options.${c}.label`),defaultValue:l.label,"aria-label":`Option ${c+1} label`})]})]},c)}),e.jsx("button",{className:"usa-button usa-button--outline",type:"button",onClick:l=>{l.preventDefault();const c=`option-${i.length+1}`;n(i.concat({id:c,label:c}))},children:"Add new"})]}),e.jsx("div",{className:"grid-col-12",children:e.jsx(k,{})})]})},lr=({focus:t,previewProps:s})=>e.jsx(e.Fragment,{children:t?e.jsx(w,{pattern:t.pattern,editComponent:e.jsx(cr,{patternId:t.pattern.id})}):e.jsx(nt,{...s})}),cr=({patternId:t})=>{const{fieldId:s,register:r}=S(t);return e.jsxs("div",{className:"grid-row grid-gap-1",children:[e.jsx("div",{className:"desktop:grid-col-4 mobile:grid-col-12",children:e.jsxs("label",{className:"usa-label",htmlFor:s("text"),children:["Field label",e.jsx("input",{className:"usa-input bg-primary-lighter text-bold",...r("text"),id:s("text"),type:"text"})]})}),e.jsx("div",{className:"desktop:grid-col-2 mobile:grid-col-12",children:e.jsxs("label",{className:"usa-label",htmlFor:s("initial"),children:["Default field value",e.jsx("input",{className:"usa-input bg-primary-lighter text-bold",id:s("initial"),type:"text",...r("initial")})]})}),e.jsx("div",{className:"desktop:grid-col-2 mobile:grid-col-12",children:e.jsxs("label",{className:"usa-label",htmlFor:s("maxLength"),children:["Maximum length",e.jsx("input",{className:"usa-input bg-primary-lighter text-bold",id:s("maxLength"),type:"text",...r("maxLength")})]})}),e.jsx("div",{className:"desktop:grid-col-2 mobile:grid-col-12",children:e.jsxs("label",{className:"usa-label",htmlFor:s("type"),children:["Field type",e.jsx("select",{className:"usa-select bg-primary-lighter text-bold",id:s("type"),...r("type"),children:e.jsx("option",{value:"input",children:"Input"})})]})}),e.jsx("div",{className:"desktop:grid-col-2 mobile:grid-col-12",children:e.jsxs("div",{className:"usa-checkbox",children:[e.jsx("input",{className:"usa-checkbox__input bg-primary-lighter",type:"checkbox",id:s("required"),...r("required")}),e.jsx("label",{className:"usa-checkbox__label",htmlFor:s("required"),children:"Required"})]})})]})},dr={checkbox:zs,paragraph:ar,input:Ks,"form-summary":Xs,fieldset:Hs,page:tr,"page-set":rr,"radio-group":nr,sequence:xe,"submission-confirmation":lr},ur=t=>`${z().baseUrl}forms#${t}`,mr=t=>`${z().baseUrl}#/${t}`;function xr(){const t=z();return e.jsx(Ms,{context:{baseUrl:t.baseUrl,components:ot,config:t.formConfig,editComponents:dr,formService:t.formService,uswdsRoot:t.uswdsRoot,urlForForm:ur,urlForFormManager:mr}})}export{xr as default};
